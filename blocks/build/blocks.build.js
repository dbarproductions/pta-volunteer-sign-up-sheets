(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var s in l)e.o(l,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:l[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.wp.blockEditor,s=window.wp.components,a=window.wp.i18n,o=window.wp.serverSideRender;var n=e.n(o);const r=window.wp.element,u=({group:e,onChange:t})=>{const l=(window.ptaSusGroupsData||{}).groups||[],o={},n={};l.forEach(e=>{o[e.slug]=e.name,n[e.name]=e.slug});const u=l.map(e=>e.name),i=(e?e.split(",").map(e=>e.trim()).filter(Boolean):[]).map(e=>o[e]||e);return(0,r.createElement)(s.FormTokenField,{label:(0,a.__)("Groups (leave empty to show all)","pta-volunteer-sign-up-sheets"),value:i,suggestions:u,onChange:e=>{const l=e.map(e=>n[e]||e.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean);t(l.join(","))},__experimentalExpandOnFocus:!0,__experimentalAutoSelectFirstMatch:!0})};(0,t.registerBlockType)("pta-volunteer-sus/signup-sheet",{edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(n(),{block:"pta-volunteer-sus/signup-sheet",attributes:e}),(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,a.__)("Sheet Settings","pta-volunteer-sign-up-sheets")},(0,r.createElement)("div",{className:"pta-volunteer-signup-guidance"},(0,r.createElement)("p",null,(0,a.__)("This block displays all volunteer sign-up sheets by default.","pta-volunteer-sign-up-sheets")),(0,r.createElement)("p",null,(0,a.__)("To preview a specific sheet, enter its ID below. Remember to clear the ID to show all sheets again.","pta-volunteer-sign-up-sheets"))),(0,r.createElement)(s.TextControl,{label:(0,a.__)("Sheet ID","pta-volunteer-sign-up-sheets"),value:e.id,onChange:e=>t({id:e}),type:"number",min:1}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("Date","pta-volunteer-sign-up-sheets"),value:e.date,onChange:e=>t({date:e})}),(()=>{const e=window.ptaSusGroupsData;return e&&Array.isArray(e.groups)&&e.groups.length>0})()&&(0,r.createElement)(u,{group:e.group,onChange:e=>t({group:e})}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("List Title","pta-volunteer-sign-up-sheets"),value:e.list_title,onChange:e=>t({list_title:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Show Headers?","pta-volunteer-sign-up-sheets"),value:e.show_headers,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({show_headers:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Show Time?","pta-volunteer-sign-up-sheets"),value:e.show_time,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({show_time:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Show Phone?","pta-volunteer-sign-up-sheets"),value:e.show_phone,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({show_phone:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Show Email?","pta-volunteer-sign-up-sheets"),value:e.show_email,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({show_email:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Order By","pta-volunteer-sign-up-sheets"),value:e.order_by,options:[{label:"First Date",value:"first_date"},{label:"Last Date",value:"last_date"},{label:"Title",value:"title"},{label:"ID",value:"id"}],onChange:e=>t({order_by:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Order","pta-volunteer-sign-up-sheets"),value:e.order,options:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],onChange:e=>t({order:e})}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("Author ID","pta-volunteer-sign-up-sheets"),value:e.author_id||"",onChange:e=>t({author_id:e}),type:"number",min:0,help:(0,a.__)("Filter sheets by WordPress user ID. Leave empty to show all sheets.","pta-volunteer-sign-up-sheets")}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("Author Email","pta-volunteer-sign-up-sheets"),value:e.author_email||"",onChange:e=>t({author_email:e}),type:"email",help:(0,a.__)("Filter sheets by author email address. Leave empty to show all sheets.","pta-volunteer-sign-up-sheets")}))))},save:()=>null}),(0,t.registerBlockType)("pta-volunteer-sus/user-signups",{attributes:{show_time:{type:"string",default:"yes"}},edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(n(),{block:"pta-volunteer-sus/user-signups",attributes:e}),(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,a.__)("Display Settings","pta-volunteer-sign-up-sheets")},(0,r.createElement)("p",null,(0,a.__)("Configure which columns to display in the user signups list.","pta-volunteer-sign-up-sheets")),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Show Time Columns?","pta-volunteer-sign-up-sheets"),value:e.show_time,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({show_time:e})}))))},save:()=>null}),(0,t.registerBlockType)("pta-volunteer-sus/upcoming-events",{attributes:{title:{type:"string",default:(0,a.__)("Current Volunteer Opportunities","pta-volunteer-sign-up-sheets")},num_items:{type:"number",default:10},show_what:{type:"string",default:"both"},sort_by:{type:"string",default:"first_date"},order:{type:"string",default:"ASC"},list_class:{type:"string",default:""}},edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(n(),{block:"pta-volunteer-sus/upcoming-events",attributes:e}),(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,a.__)("Widget Settings","pta-volunteer-sign-up-sheets")},(0,r.createElement)(s.TextControl,{label:(0,a.__)("Title","pta-volunteer-sign-up-sheets"),value:e.title,onChange:e=>t({title:e})}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("# of items to show (-1 for all)","pta-volunteer-sign-up-sheets"),type:"number",value:e.num_items,onChange:e=>t({num_items:parseInt(e)})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("What to show?","pta-volunteer-sign-up-sheets"),value:e.show_what,options:[{label:(0,a.__)("Both","pta-volunteer-sign-up-sheets"),value:"both"},{label:(0,a.__)("Volunteer Events (with sign-ups)","pta-volunteer-sign-up-sheets"),value:"signups"},{label:(0,a.__)("No Sign-Up Events (display events only)","pta-volunteer-sign-up-sheets"),value:"events"}],onChange:e=>t({show_what:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Sort By","pta-volunteer-sign-up-sheets"),value:e.sort_by,options:[{label:(0,a.__)("First Date","pta-volunteer-sign-up-sheets"),value:"first_date"},{label:(0,a.__)("Last Date","pta-volunteer-sign-up-sheets"),value:"last_date"},{label:(0,a.__)("Title","pta-volunteer-sign-up-sheets"),value:"title"},{label:(0,a.__)("Sheet ID","pta-volunteer-sign-up-sheets"),value:"id"}],onChange:e=>t({sort_by:e})}),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Sort Order","pta-volunteer-sign-up-sheets"),value:e.order,options:[{label:(0,a.__)("Ascending","pta-volunteer-sign-up-sheets"),value:"ASC"},{label:(0,a.__)("Descending","pta-volunteer-sign-up-sheets"),value:"DESC"}],onChange:e=>t({order:e})}),(0,r.createElement)(s.TextControl,{label:(0,a.__)("CSS Class for ul list of signups","pta-volunteer-sign-up-sheets"),value:e.list_class,onChange:e=>t({list_class:e})}))))},save:()=>null}),(0,t.registerBlockType)("pta-volunteer-sus/validation-form",{edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(n(),{block:"pta-volunteer-sus/validation-form",attributes:e}),(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,a.__)("Display Settings","pta-volunteer-sign-up-sheets")},(0,r.createElement)("p",null,(0,a.__)("If you use this on a page with the main sign up sheets block, you may want to hide the output of this block when validated so there a no messages saying you are already validated on every page.","pta-volunteer-sign-up-sheets")),(0,r.createElement)(s.SelectControl,{label:(0,a.__)("Hide When Validated?","pta-volunteer-sign-up-sheets"),value:e.hide_when_validated,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],onChange:e=>t({hide_when_validated:e})}))))},save:()=>null}),(0,t.registerBlockType)("pta-volunteer-sus-block/block-pta-volunteer-sus-block",{title:(0,a.__)("Sign Up Sheets (Legacy)","pta-volunteer-sign-up-sheets"),icon:"welcome-write-blog",category:"widgets",attributes:{codeType:{default:"signups"},id:{default:""},date:{default:""},group:{default:""},list_title:{default:""},show_headers:{default:"yes"},show_time:{default:"yes"},show_phone:{default:"no"},show_email:{default:"no"},show_date_start:{default:"yes"},show_date_end:{default:"yes"},order_by:{default:"first_date"},order:{default:"ASC"}},deprecated:[{attributes:{codeType:{default:"signups"},id:{default:""},date:{default:""},group:{default:""},list_title:{default:""},show_headers:{default:"yes"},show_time:{default:"yes"},show_phone:{default:"no"},show_email:{default:"no"},show_date_start:{default:"yes"},show_date_end:{default:"yes"},order_by:{default:"first_date"},order:{default:"ASC"}},save:({attributes:e})=>(0,r.createElement)("div",{className:"wp-block-pta-volunteer-sus-block-block-pta-volunteer-sus-block"},`[pta_sign_up_sheet id="${e.id}" date="${e.date}" group="${e.group}" list_title="${e.list_title}" show_headers="${e.show_headers}" show_time="${e.show_time}" show_phone="${e.show_phone}" show_email="${e.show_email}" show_date_start="${e.show_date_start}" show_date_end="${e.show_date_end}" order_by="${e.order_by}" order="${e.order}" ]`)}],edit:({attributes:e,clientId:o})=>{const n=(0,l.useBlockProps)();return(0,r.createElement)("div",{...n},(0,r.createElement)("div",{className:"components-notice is-warning"},(0,r.createElement)("p",null,(0,a.__)("This block has been deprecated. Please convert it to the new Sign Up Sheets block to maintain functionality.","pta-volunteer-sign-up-sheets")),(0,r.createElement)("pre",null,"Current block attributes: ",JSON.stringify(e,null,2)),(0,r.createElement)(s.Button,{isPrimary:!0,onClick:()=>{console.log("Current attributes:",e);const l={id:e.id||"",date:e.date||"",group:e.group||"",list_title:e.list_title||"",show_headers:e.show_headers||"yes",show_time:e.show_time||"yes",show_phone:e.show_phone||"no",show_email:e.show_email||"no",order_by:e.order_by||"first_date",order:e.order||"ASC"};console.log("New attributes:",l);try{const e=(0,t.createBlock)("pta-volunteer-sus/signup-sheet",l);wp.data.dispatch("core/block-editor").replaceBlock(o,e)}catch(e){console.error("Block conversion error:",e)}}},(0,a.__)("Convert to New Block","pta-volunteer-sign-up-sheets"))))},save:()=>null})})();